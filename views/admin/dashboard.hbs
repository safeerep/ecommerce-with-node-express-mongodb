<body class="mt-5">
  <div class="container-fluid">
    <div class="row vh-100">  
      <div class="d-flex justify-content-around mt-4">
        <div class="card col-md-3 p-3">
          <i class="fa-solid fa-cart-shopping fa-lg text-success"></i><br>
          <h6>Total Number of Orders</h6>
          <h4>{{numberOfOrders}}</h4>
        </div>
        <div class="card col-md-3 p-3">
          <i class="fa-solid fa-table fa-lg text-success"></i><br>
          <h6>Total products sold</h6>
          <h4>{{totalNumberOfSales}}</h4>
        </div>
        <div class="card col-md-3 p-3">
          <i class="fa-solid fa-users fa-lg text-success"></i><br>
          <h6>Active Customers </h6>
          <h4>{{numberOfUsers}}</h4>
        </div>
      </div>
      <div class="d-flex justify-content-start">
        {{!-- <form id="sales-report-" action="" method="get"> --}}
          <button type="button" class="btn m-2 btn-white border" id="download-sales-report" >Download last month report</button>
        {{!-- </form> --}}
      </div>
      <div class="d-flex justify-content-center my-5">
        <div class="col-md-3 d-flex justify-content-around border rounded">
          <a id="filtervalue" class="btn btn-white border-radius filter-option" data-filter="day">By Day</a>
          <a id="filtervalue" class="btn btn-white border-radius filter-option" data-filter="month">By Month</a>
          <a id="filtervalue" class="btn btn-white border-radius filter-option" data-filter="year">By Year</a>
        </div>
      </div>
      <canvas id="myChart" class="w-100 h-75"></canvas>
      {{!-- starting best selling products --}}
      <div class="border-start w-100 mt-5 p-5 bg-light">
        <h3 class="mb-3">Best Selling {{topTenProducts.length}} Products</h3>
        <div class="table-responsive">
        <table class=" w-100">
            <thead>
              <tr class="h5">
                <th class="border text-center-in-table">Product</th>
                <th class="border text-center-in-table">Product Id</th>
                <th class="border text-center-in-table">Product Name</th>
                <th class="border text-center-in-table">Brand Name</th>
                <th class="border text-center-in-table">Price</th>
                <th class="border text-center-in-table">Number of items sold</th>
              </tr>
            </thead>
            <tbody>
              {{#each topTenProducts}}
              <tr>
                <td class="border">
                    <figure class="itemside d-flex align-items-center">
                      <div class="aside border">
                        <img class="img-sm" src="/uploads/{{this.productDetails.images.[0]}}" alt="">
                      </div>
                    </figure>
                </td>
                <td class="border text-center-in-table">{{this.productDetails._id}}</td>
                <td class="border text-center-in-table">{{this.productDetails.ProductName}}</td>
                <td class="border text-center-in-table">{{this.productDetails.BrandName}}</td>
                <td class="border text-center-in-table">â‚¹ {{this.productDetails.SellingPrice}}</td>
                <td class="border text-center-in-table">{{this.totalCount}}</td>
              </tr>
              {{/each}}
            </tbody>
        </table>
        </div>
      </div>
      {{!-- ending best selling products --}}
    </div>
  </div>
</body>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<script>
  $('#download-sales-report').on('click', function (e) {
    e.preventDefault()
    $.ajax({
      url: '/admin/download/sales-report',
      method: 'get',
      success: response => {
        console.log(response)
      }
    })
  })
</script>
